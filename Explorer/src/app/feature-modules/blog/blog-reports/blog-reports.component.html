<div class="container mt-4">

    <div class="row">
        <h1 class="text-center">Manage reported comments (from blog module)</h1>
    </div>

    <div class="row">

        <h1>Unreviewed reports</h1>

        <div class="col-12" style="height: 30rem; overflow-y: scroll;">
            <div class="card my-2" *ngFor="let report of unreviewedReports">
                <div class="card-body d-flex align-items-center justify-content-between">
                    <div>
                        <h2 class="card-title">{{report.username}}</h2>
                        <p class="card-text fst-italic">{{report.comment}}</p>
                        <p class="card-text mt-4">Reported as <span
                                class="text-primary"><b>{{this.reportReasons[report.reportReason]}}</b></span>.</p>
                    </div>
                    <div>
                        <button class="btn btn-outline-danger me-3" data-bs-toggle="modal"
                            data-bs-target="#acceptReportModal" (click)="selectReport(report)"><i class="bi bi-flag"></i></button>
                        <button class="btn btn-outline-success" data-bs-toggle="modal"
                            data-bs-target="#denyReportModal" (click)="selectReport(report)"><i class="bi bi-flag"></i></button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Accept Report Modal -->
    <div class="modal fade" id="acceptReportModal" tabindex="-1" aria-labelledby="acceptReportModalLabel"
        aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title">Review a report</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>
                        Are you sure that this comment is <span class="text-danger"><b>{{this.reportReasons[this.selectedReport.reportReason]}}</b></span>?
                        <br>
                        If you confirm, user <b>{{this.selectedReport.username}}</b> will be banned from using blog features, and will be notified.
                    </p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="close-accept-report-modal-button" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-danger" (click)="acceptReport()">Confirm</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Deny Report Modal -->
    <div class="modal fade" id="denyReportModal" tabindex="-1" aria-labelledby="denyReportModalLabel"
        aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title">Review a report</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>
                        Are you sure that this comment is <b>NOT</b>&nbsp;<span class="text-danger"><b>{{this.reportReasons[this.selectedReport.reportReason]}}</b></span>?
                    </p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="close-deny-report-modal-button" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-success" (click)="denyReport()">Confirm</button>
                </div>
            </div>
        </div>
    </div>

    <div class="row mt-5">
        <h1>Reviewed reports</h1>

        <div class="col-12" style="height: 30rem; overflow-y: scroll;">
            <div class="card my-2" *ngFor="let report of reviewedReports">
                <div class="card-body d-flex align-items-center justify-content-between">
                    <div>
                        <h2 class="card-title">{{report.username}}</h2>
                        <p class="card-text fst-italic">{{report.comment}}</p>
                        <p class="card-text mt-4">Reported as <span class="text-primary"><b>{{this.reportReasons[report.reportReason]}}</b></span>.</p>
                        <p class="card-text mt-3">
                            Report 
                            <span class="text-primary" *ngIf="!report.isAccepted">denied</span>
                            <span class="text-primary" *ngIf="report.isAccepted">accepted</span>.
                        </p>
                    </div>
                </div>
            </div>
        </div>

    </div>

</div>